# https://doc.traefik.io/traefik/routing/overview/
[http.routers]
  [http.routers.app]
    rule= "Host(`{{ entry.env.ALLOWED_HOSTS }}`) && (PathPrefix(`/api`) || PathPrefix(`/ws`))"
    entrypoints = ["http", "https"]
    [http.routers.app.tls]
      certresolver = "acmec"
      options = "default"

  [http.routers.site]
    rule = "Host(`{{ entry.env.ALLOWED_HOSTS }}`)"
    entrypoints = ["http", "https"]
    [http.routers.site.tls]
      certresolver = "acmec"
      options = "default"

# https://doc.traefik.io/traefik/https/tls/
# generated 2023-08-17, Mozilla Guideline v5.7, Traefik 2.1.2, intermediate configuration, no HSTS
# https://ssl-config.mozilla.org/#server=traefik&version=2.1.2&config=intermediate&hsts=false&guideline=5.7
[tls.options]
  [tls.options.default]
    minVersion = "VersionTLS12"
    cipherSuites = [
      "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256",
      "TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256",
      "TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384",
      "TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384",
      "TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305",
      "TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305"
    ]
